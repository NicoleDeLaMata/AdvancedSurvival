[
  {
    "objectID": "Resources.html",
    "href": "Resources.html",
    "title": "Resources",
    "section": "",
    "text": "Jackson, C. (2016). Flexsurv: a platform for parametric survival modeling in R. Journal of Statistical Software, 70(8), 1–33. https://doi.org/10.18637/jss.v070.i08\nTherneau, T., Crowson, C., & Atkinson, E. (2020). Multi-state models and competing risks. CRAN-R (https://cran. r-project. org/web/packages/survival/vignettes/compete. pdf).\nTherneau, T. M., & Ou, F.-S. (2024). Using multistate models with clinical trial data for a deeper understanding of complex disease processes. Clinical Trials, 21(5), 531–540. https://doi.org/10.1177/17407745241267862",
    "crumbs": [
      "Resources"
    ]
  },
  {
    "objectID": "Resources.html#recommended-readings",
    "href": "Resources.html#recommended-readings",
    "title": "Resources",
    "section": "",
    "text": "Jackson, C. (2016). Flexsurv: a platform for parametric survival modeling in R. Journal of Statistical Software, 70(8), 1–33. https://doi.org/10.18637/jss.v070.i08\nTherneau, T., Crowson, C., & Atkinson, E. (2020). Multi-state models and competing risks. CRAN-R (https://cran. r-project. org/web/packages/survival/vignettes/compete. pdf).\nTherneau, T. M., & Ou, F.-S. (2024). Using multistate models with clinical trial data for a deeper understanding of complex disease processes. Clinical Trials, 21(5), 531–540. https://doi.org/10.1177/17407745241267862",
    "crumbs": [
      "Resources"
    ]
  },
  {
    "objectID": "Resources.html#recommended-textbooks",
    "href": "Resources.html#recommended-textbooks",
    "title": "Resources",
    "section": "2 Recommended textbooks",
    "text": "2 Recommended textbooks\nAndersen, P. K. (2023). Models for Multi-State Survival Data: Rates, Risks, and Pseudo-Values (H. Ravn, Ed.; First edition, Vol. 1). CRC Press. https://doi.org/10.1201/9780429029684\nBeyersmann, J., Allignol, A., & Schumacher, M. (2012). Competing Risks and Multistate Models with R (1st ed. 2012.). Springer New York. https://doi.org/10.1007/978-1-4614-2035-4\nLegrand, C. (2021). Advanced survival models (First edition.). CRC Press. https://www.taylorfrancis.com/books/9780429054167",
    "crumbs": [
      "Resources"
    ]
  },
  {
    "objectID": "Parametric.html",
    "href": "Parametric.html",
    "title": "3 Parametric survival models",
    "section": "",
    "text": "0.1 Lecture\nPut here\n\n\n0.2 Practical exercises\nPut here",
    "crumbs": [
      "Day 1: Joint & parametric modelling",
      "3 Parametric survival models"
    ]
  },
  {
    "objectID": "OverviewD1.html",
    "href": "OverviewD1.html",
    "title": "Day 1",
    "section": "",
    "text": "Welcome to Day 1 of the Advanced Survival Concepts and Analysis short course for 2026.\nIn today’s topics we will learn about:\n- Cox model when PH assumption is violated\n- Joint modelling with survival data\n- Parametric survival modelling\n- Flexible parametric survival modelling (first lecture)\nWe will cover the theorectical concepts and practical applications. You will also have take-home exercises to practise the concepts on data in your own time and at your own pace.",
    "crumbs": [
      "Day 1: Joint & parametric modelling"
    ]
  },
  {
    "objectID": "OverviewD1.html#todays-topics",
    "href": "OverviewD1.html#todays-topics",
    "title": "Day 1",
    "section": "",
    "text": "Welcome to Day 1 of the Advanced Survival Concepts and Analysis short course for 2026.\nIn today’s topics we will learn about:\n- Cox model when PH assumption is violated\n- Joint modelling with survival data\n- Parametric survival modelling\n- Flexible parametric survival modelling (first lecture)\nWe will cover the theorectical concepts and practical applications. You will also have take-home exercises to practise the concepts on data in your own time and at your own pace.",
    "crumbs": [
      "Day 1: Joint & parametric modelling"
    ]
  },
  {
    "objectID": "OverviewD1.html#assumed-knowledge",
    "href": "OverviewD1.html#assumed-knowledge",
    "title": "Day 1",
    "section": "2 Assumed knowledge",
    "text": "2 Assumed knowledge\nWe assume a working basic knowledge of survival analysis in our short course.\nThis includes a basic understanding of:\n\nWhat makes survival data different from standard binary outcomes\nCensoring in survival analysis\nKaplan-Meier survival estimator\nCox proportional hazards modelling",
    "crumbs": [
      "Day 1: Joint & parametric modelling"
    ]
  },
  {
    "objectID": "OverviewD1.html#by-the-end-of-today",
    "href": "OverviewD1.html#by-the-end-of-today",
    "title": "Day 1",
    "section": "3 By the end of today",
    "text": "3 By the end of today\nWe would expect you to have a working understanding of:\n\nRecognising when proportional hazards (PH) assumption is violated and different strategies to handle non-PH.\nWhen joint modelling would be appropriate and the two components of joint modelling\nConcepts of parametric survival modelling and selection of appropriate survival distribution\nHow flexible parametric survival models differ and how to appropriately fit these models",
    "crumbs": [
      "Day 1: Joint & parametric modelling"
    ]
  },
  {
    "objectID": "Joint_model.html",
    "href": "Joint_model.html",
    "title": "2 Joint modelling",
    "section": "",
    "text": "0.1 Lecture\nPut here\n\n\n0.2 Practical exercises\nPut here",
    "crumbs": [
      "Day 1: Joint & parametric modelling",
      "2 Joint modelling"
    ]
  },
  {
    "objectID": "intro_R.html",
    "href": "intro_R.html",
    "title": "Introduction to R",
    "section": "",
    "text": "If you have no experience in R, or your programming skills have become rusty, then we strongly recommend that you complete the below self-guided tutorial.\nYou can carry out an interactive R Learnr self-guided tutorial that specifically prepares you for the assumed R skills for this short course. The R Learnr tutorial has four parts. You will need to install R and RStudio on your computer.\nOnce you have RStudio on your computer, you can download the interactive R Learnr tutorial here. You can open it in RStudio and run it by clicking the Run Document button above the tutorial which will turn it into an interactive tutorial which opens up in a new window.\nAlternatively, you can access the interactive R Learnr tutorial completely online here or a static version of the tutorial is available here.\nOther useful resources included:\nUCLA R learning modules\nBasic basics from RLadies",
    "crumbs": [
      "Introduction to R"
    ]
  },
  {
    "objectID": "intro_R.html#getting-started-with-r",
    "href": "intro_R.html#getting-started-with-r",
    "title": "Introduction to R",
    "section": "",
    "text": "If you have no experience in R, or your programming skills have become rusty, then we strongly recommend that you complete the below self-guided tutorial.\nYou can carry out an interactive R Learnr self-guided tutorial that specifically prepares you for the assumed R skills for this short course. The R Learnr tutorial has four parts. You will need to install R and RStudio on your computer.\nOnce you have RStudio on your computer, you can download the interactive R Learnr tutorial here. You can open it in RStudio and run it by clicking the Run Document button above the tutorial which will turn it into an interactive tutorial which opens up in a new window.\nAlternatively, you can access the interactive R Learnr tutorial completely online here or a static version of the tutorial is available here.\nOther useful resources included:\nUCLA R learning modules\nBasic basics from RLadies",
    "crumbs": [
      "Introduction to R"
    ]
  },
  {
    "objectID": "Flexible2.html",
    "href": "Flexible2.html",
    "title": "2 Flexible parametric survival",
    "section": "",
    "text": "0.1 Lecture\nPut here\n\n\n0.2 Practical exercises\nPut here",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "2 Flexible parametric survival"
    ]
  },
  {
    "objectID": "Competing.html",
    "href": "Competing.html",
    "title": "1 Competing risks",
    "section": "",
    "text": "0.1 Lecture\nPut here\n\n\n0.2 Practical exercises\nPut here",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "1 Competing risks"
    ]
  },
  {
    "objectID": "Flexible1.html",
    "href": "Flexible1.html",
    "title": "4 Flexible parametric survival",
    "section": "",
    "text": "0.1 Lecture\nPut here\n\n\n0.2 Practical exercises\nPut here",
    "crumbs": [
      "Day 1: Joint & parametric modelling",
      "4 Flexible parametric survival"
    ]
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Advanced Survival Short Course 2026",
    "section": "",
    "text": "Welcome to the “Advanced survival concepts and analysis” short course in 2026!\nYou will find all the related content either here on this webpage or via Github.\nPlease let us know if there are any technical issues.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#welcome",
    "href": "index.html#welcome",
    "title": "Advanced Survival Short Course 2026",
    "section": "",
    "text": "Welcome to the “Advanced survival concepts and analysis” short course in 2026!\nYou will find all the related content either here on this webpage or via Github.\nPlease let us know if there are any technical issues.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#timetable",
    "href": "index.html#timetable",
    "title": "Advanced Survival Short Course 2026",
    "section": "2 Timetable",
    "text": "2 Timetable\nDay 1: Thursday 26th Feb\n\n\n\nTimes\nTopic\nFacilitator\n\n\n\n\n8:30 - 9:00\nOptional: Introduction to R\nAll\n\n\n9:00 - 9:15\nWelcome and overview: Today’s topics\nNicole\n\n\n9:15 - 11.20\nPH assumption violation in Cox models\nFarzaneh\n\n\n11:20 - 11.30\nBreak\n\n\n\n11:30 - 12:30\nJoint modelling: survival concepts\nFarzaneh\n\n\n12.30 - 1:15\nLunch\n\n\n\n1:15 - 2:00\nJoint modelling: survival concepts (continued)\nFarzaneh\n\n\n2:00 - 2:50\nParametric survival models\nMaarit\n\n\n2:50 - 3:00\nBreak\n\n\n\n3:00 - 3:50\nFlexible parametric survival models\nMaarit\n\n\n3:50 - 4.00\nWrap-up\nMaarit\n\n\n\nDay 2: Friday 27th Feb\n\n\n\nTimes\nTopic\nFacilitator\n\n\n\n\n9:00 - 9:15\nRecap and overview: today’s topics\nNicole\n\n\n9:15 - 11.00\nCompeting risks models\nMaarit\n\n\n11:00 - 11.10\nBreak\n\n\n\n11:10 - 12:30\nFlexible parametric survival models (continued)\nNicole\n\n\n12.30 - 1:15\nLunch\n\n\n\n1:15 - 2:50\nMulti-state modelling\nNicole\n\n\n2:50 - 3:00\nBreak\n\n\n\n3:00 - 3:50\nMulti-state modelling (continued)\nNicole\n\n\n3:50 - 4.00\nWrap-up\nMaarit",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "index.html#facilitators",
    "href": "index.html#facilitators",
    "title": "Advanced Survival Short Course 2026",
    "section": "3 Facilitators",
    "text": "3 Facilitators\n\n\n\n\nDr Nicole De La Mata is a senior lecturer in biostatistics at the University of Sydney. Her expertise lies in establishing data linkage studies and using these to apply advanced statistical models to understand patient journeys and complex clinical scenarios. Her work has broadly aimed to improve health service quality and efficiency to translate into better and more equitable patient outcomes. She has a special interest in multi-state modelling and competing risks models.\n\n\n\nDr Farzaneh Boroumand is a Lecturer in Biostatistics at the Sydney School of Public Health and a senior biostatistician at the Centre for Kidney Research, Westmead Hospital. She is passionate about transforming complex statistical concepts into clear, practical insights and designing interactive learning experiences that help postgraduate students apply biostatistics confidently in real-world health research. Her research focuses on survival analysis, causal inference, and chronic kidney disease, collaborating with clinicians and multidisciplinary teams to improve patient outcomes.\n\n\n\nAssociate Professor Maarit Laaksonen is an Associate Professor in Biostatistics in the Sydney School of Public Health. She leads national and international data linkage projects evaluating the determinants of the future burden of cancer with the aim of improving cancer prevention, early detection and outcomes. Maarit has a strong interest in the development and application of disease burden measures, survival models and the impact of competing risks on health outcomes.",
    "crumbs": [
      "Home"
    ]
  },
  {
    "objectID": "Intro_to_R_LearnR.html",
    "href": "Intro_to_R_LearnR.html",
    "title": "Advanced Survival",
    "section": "",
    "text": "In this tutorial, we will use the statistical programming language R to carry out analyses. RStudio allows you to run R in a more user-friendly environment. This is an introduction to R and RStudio and to the basic skills you need to complete the exercises.\nFirst, let’s make sure you have the latest, or sufficiently up-to-date, versions of R and RStudio installed on your computer as you may not otherwise be able to install all the R packages needed for the course.\nIf you already have R and RStudio installed, check on to see the R version installed. You can view your R version in the start menu, in R Console when you first open R or Rstudio, or by typing getRversion() in your R Console.\nIf you have an older version of R installed on your computer, it is recommended that you uninstall that version and then follow the steps below for installing R and RStudio.\nThe latest version of R is available from the Comprehensive R Archive Network (CRAN) webpage: https://cran.r-project.org/. There are versions available for Windows, Linux, and Mac.\nTo install R on a PC click on “Download R for Windows”. You need to install the base system so click on “install R for the first time”. This will take you to a new window with the latest version of R. Click on “Download R 4.X.X for Windows” and follow the installation instructions.\nTo install R on a Mac click on “Download R for macOS” and download the R binary under “Latest release”. The file will have an extension of .pkg, for example, R-4.X.X.pkg. Click on this link and follow the instructions.\nPlease note that on Windows, R is typically installed under C:/Program Files/R/. However, if you do not have administrative privileges on your computer, you will not be able to write to the /Program Files/ directory and this may cause difficulties when you are trying to install R packages later on. The easiest way to avoid this issue is to create a new installation location (e.g. C:/Users/myname/R/) and use it instead of the default C:/Program Files/R/ when installing R. Further instructions are available from https://rpubs.com/tomhopper/windows_nonadmin_install. Otherwise, default settings are OK.\nAll R functions and many datasets are stored in packages. For example, a collection of 12 base packages are installed when the base distribution of R is downloaded from the CRAN webpage. Some other recommended packages are also automatically installed with the base system. If you already have R and RStudio installed, you can check for updates on the packages that you have already installed by typing update.packages() in your R Console. This may take several minutes and require use input.\nTo install RStudio go to https://rstudio.com/products/rstudio/download/, scroll down and download the free RStudio Desktop, choosing the appropriate file for your operating system and following the prompts. When installing RStudio, remember to select the same new installation location as you did for R if not the default C:/Program Files/R/. If you may need to use RStudio on several different computers, you can install R and RStudio onto a USB stick and then you can use RStudio on any computer that reads your USB stick.\nOnce you have successfully installed the latest versions of R and RStudio, navigate to the RStudio program in the start menu and launch the program. Once RStudio opens (it may take a little while) you should see three panels on your RStudio screen:\n\nThe big left panel is the Console where you can type commands and see output\nThe top right panel contains the tabs Environment and History. The Environment tab stores any object, value, function or anything else you create during your R session. The History tab keeps a record of all previous commands.\nThe bottom right panel contains the tabs Files, Plots, Packages, and Help. The Files tab shows all the files and folders in your working directory as if you were on a PC/Mac window. The Plots tab will show all your graphs. The Packages tab will show a list of packages or add-ons needed to run certain process. The Help tab provides additional info.\n\nYou can think of R as a (very advanced) calculator. Try typing some basic mathematical calculations in the Console before moving on."
  },
  {
    "objectID": "Intro_to_R_LearnR.html#introduction-to-r-and-rstudio",
    "href": "Intro_to_R_LearnR.html#introduction-to-r-and-rstudio",
    "title": "Advanced Survival",
    "section": "",
    "text": "In this tutorial, we will use the statistical programming language R to carry out analyses. RStudio allows you to run R in a more user-friendly environment. This is an introduction to R and RStudio and to the basic skills you need to complete the exercises.\nFirst, let’s make sure you have the latest, or sufficiently up-to-date, versions of R and RStudio installed on your computer as you may not otherwise be able to install all the R packages needed for the course.\nIf you already have R and RStudio installed, check on to see the R version installed. You can view your R version in the start menu, in R Console when you first open R or Rstudio, or by typing getRversion() in your R Console.\nIf you have an older version of R installed on your computer, it is recommended that you uninstall that version and then follow the steps below for installing R and RStudio.\nThe latest version of R is available from the Comprehensive R Archive Network (CRAN) webpage: https://cran.r-project.org/. There are versions available for Windows, Linux, and Mac.\nTo install R on a PC click on “Download R for Windows”. You need to install the base system so click on “install R for the first time”. This will take you to a new window with the latest version of R. Click on “Download R 4.X.X for Windows” and follow the installation instructions.\nTo install R on a Mac click on “Download R for macOS” and download the R binary under “Latest release”. The file will have an extension of .pkg, for example, R-4.X.X.pkg. Click on this link and follow the instructions.\nPlease note that on Windows, R is typically installed under C:/Program Files/R/. However, if you do not have administrative privileges on your computer, you will not be able to write to the /Program Files/ directory and this may cause difficulties when you are trying to install R packages later on. The easiest way to avoid this issue is to create a new installation location (e.g. C:/Users/myname/R/) and use it instead of the default C:/Program Files/R/ when installing R. Further instructions are available from https://rpubs.com/tomhopper/windows_nonadmin_install. Otherwise, default settings are OK.\nAll R functions and many datasets are stored in packages. For example, a collection of 12 base packages are installed when the base distribution of R is downloaded from the CRAN webpage. Some other recommended packages are also automatically installed with the base system. If you already have R and RStudio installed, you can check for updates on the packages that you have already installed by typing update.packages() in your R Console. This may take several minutes and require use input.\nTo install RStudio go to https://rstudio.com/products/rstudio/download/, scroll down and download the free RStudio Desktop, choosing the appropriate file for your operating system and following the prompts. When installing RStudio, remember to select the same new installation location as you did for R if not the default C:/Program Files/R/. If you may need to use RStudio on several different computers, you can install R and RStudio onto a USB stick and then you can use RStudio on any computer that reads your USB stick.\nOnce you have successfully installed the latest versions of R and RStudio, navigate to the RStudio program in the start menu and launch the program. Once RStudio opens (it may take a little while) you should see three panels on your RStudio screen:\n\nThe big left panel is the Console where you can type commands and see output\nThe top right panel contains the tabs Environment and History. The Environment tab stores any object, value, function or anything else you create during your R session. The History tab keeps a record of all previous commands.\nThe bottom right panel contains the tabs Files, Plots, Packages, and Help. The Files tab shows all the files and folders in your working directory as if you were on a PC/Mac window. The Plots tab will show all your graphs. The Packages tab will show a list of packages or add-ons needed to run certain process. The Help tab provides additional info.\n\nYou can think of R as a (very advanced) calculator. Try typing some basic mathematical calculations in the Console before moving on."
  },
  {
    "objectID": "Intro_to_R_LearnR.html#r-markdown",
    "href": "Intro_to_R_LearnR.html#r-markdown",
    "title": "Advanced Survival",
    "section": "2 2. R Markdown",
    "text": "2 2. R Markdown\nR Markdown is a format for writing reproducible, dynamic reports with R. This is an R Markdown document that has been turned into an interactive introduction using the learnr package which we will cover in more detail below. We will be using similar interactive R Learnr tutorials to prepare you for some of the exercises. Your final data analysis report can also be prepared and returned as an R Markdown file, so let us practice creating one.\nFirst, you need to install the rmarkdown package from CRAN. Packages not included with the base distribution (like rmarkdown) can be installed from within R. You can use the install.packages() function from the R Console window or by typing install.packages(\"rmarkdown\").\nYou can then create a new R Markdown file by clicking File &gt; New File &gt; R Markdown in the menu bar at the top of your RStudio screen. A window will open where you can enter a Title (e.g., My first R Markdown document) and Author Name (your name) and choose the desired Output Format. The default output format is html and we will start with that format. Then click OK.\nAn example R Markdown file was created and opens up in R Studio above your R Console on the left. It has three parts:\n\nHeader: The text at the top of the document that begins and ends with three dashes --- and includes four default elements\n\ntitle: The title of your document\nauthor: Who wrote the document\ndate: By default, this is the date that the file was created\noutput: What format will the output be in (in this case html)\n\nR code chunks: Chunks of R code that can be run and rendered to an output document (as explained below). All code chunks begin and end with three backticks (found on the same key as the tilde (~) on your keyboard) ```\n\nThe first line contains the language (R) and the name of the chunk within curly brackets. You can also add options within the curly brackets to customise what code or output appears on the rendered output (e.g., the echo = FALSE will suppress the R code, note the code will still run and all output will be presented unless another option is used).\nThe following lines are for the R code and comments (i.e., text that describes the intent of your code and is not processed by R, indicated by the # comment character at the beginning of a line).\n\nR Markdown sections: Text that describes and documents your workflow written using R Markdown syntax. Markdown is a human readable syntax for formatting text documents, similar to using the format tools (heading, bold) in a word processing tool like Microsoft Word or Google Docs, that can be transformed to web pages, PDFs or Word documents.\n\nYou can save the example file that was created as usual by clicking File &gt; Save As under a name of your choosing (note that the document title is not the same as the file name). R Markdown files have the extension .Rmd which will be associated with RStudio by default.\nThe R Markdown file including R code chunks can be converted to html (or another format) using the knitr package. You can install the knitr package by typing install.packages(\"knitr\") on the R Console. Typically, to use the functions and datasets contained in a package, that package must be loaded using the library function (e.g., library(knitr). In RStudio, however, you can just click the Knit button and it will automatically load the rmarkdown and knitr packages. RStudio will usually also automatically suggest installing the necessary packages for you when needed for the first time. In that case, a yellow message stating “Package ‘package_name’ required but is not installed” will appear above your R Markdown file and you can install it by clicking the Install button next to the message. Using the functions from these packages, RStudio then executes the code chunks and converts the R Markdown file into the output format specified. When knitting is complete, an html format (web page) output, that was built from a combination of text documentation and R code that was written using R Markdown syntax, should automatically open. An html file has also been automatically saved to your working directory. If you cannot see the Knit button, you can use the keyboard shortcut Ctrl + Shift + K (Windows/Linux) or Cmd + Shift + K (Mac). You can also always knit from the R console directly rmarkdown::render(\"your_document_name.Rmd\"). Make sure you are in the directory where your .Rmd file is saved or provide the full path.\nYou might want to output your final data analysis report in PDF file format, and you can now practice creating and converting an R Markdown file into a PDF file. Note that you will need the tinytex package for helping compile the R Markdown file to PDF. You can install the TinyTex distribution by typing tinytex::install_tinytex() in the R Console and this will also install the actual TinyTex LaTeX program that you need. If you run into difficulties in converting your R Markdown file to PDF, an error message will appear in red in your Console window with instructions on how to try to debug the error.\nOnce you are familiar with the structure of the R Markdown document and the R Markdown syntax you can just open a new text file, save it with the extension .Rmd and produce your own R Markdown syntax instead of using the RStudio Markdown template. For example, you can just change the output option in your header from html_document into pdf_document if you want to convert your R Markdown file into a PDF instead of an html document.\nMore examples of the most commonly used R Markdown syntax are provided at https://rmarkdown.rstudio.com/authoring_basics.html. You can also download an R Markdown cheat sheet by clicking Help &gt; Cheat Sheets &gt; R Markdown Cheat Sheet. You can also find cheat sheets for R packages here.\nHave a go at trying some of the R Markdown options and syntax before moving on."
  },
  {
    "objectID": "Intro_to_R_LearnR.html#r-learnr",
    "href": "Intro_to_R_LearnR.html#r-learnr",
    "title": "Advanced Survival",
    "section": "3 3. R Learnr",
    "text": "3 3. R Learnr\nDuring this course we will prepare you for some of the exercises using the R Learnr tutorials which combine text, code and live coding boxes where you can practice your R coding. The R Learnr tutorials run as packages in RStudio, with the learnr package making it easy to turn any R Markdown document into an interactive tutorial.\nNote you will need to have the package learnr installed before running the tutorials. You can practice installing this package now using the syntax provided before and this live coding box. You can run the code by clicking Run Code.\n\n\n\nShow R code\n# type your code here:\n\n\n\n\nThis document is also an R Learnr tutorial which you can now open in RStudio and have a closer look at.\nThe R Learnr document differs from the R Markdown document in the following ways:\n\nIn the header, you need to specify output: learnr::tutorial (instead of output: html_document) and runtime: shiny_prerendered.\nThe first R code chunk is the setup section of our learnr tutorial, which for example includes code for checking whether all of the packages needed for the tutorial have been installed, prompting the installation of packages not installed, and loading all the necessary packages. You can use similar setup code for installing and loading the packages needed for your final data analysis report. The set up code also prepares the environment for the interactive exercises so that that they imitate working on the R Console where R remembers everything you have defined in that session, as otherwise R code written in separate coding boxes is not chained.\nThe later R code chunks also have custom options such as exercise that allow the user to interact with the tutorial.\n\nYou can run the Learnr tutorial by clicking the Run Document button above the tutorial. This automatically loads the learnr package which will then turn it into an interactive tutorial which opens up in a new window.\nNext we will practice how to use the Learnr tutorial while learning some R basics that we will need later on."
  },
  {
    "objectID": "Intro_to_R_LearnR.html#r-basics",
    "href": "Intro_to_R_LearnR.html#r-basics",
    "title": "Advanced Survival",
    "section": "4 4. R basics",
    "text": "4 4. R basics\n\n4.1 4.1. Objects and assignment\nR is an object-oriented language, which means that everything in R is an object and that analyses, models and graphs can be stored as objects.\nThe most basic type of R object is a vector (note a scalar is a vector of length 1). Other objects include matrices, arrays, lists, factors, data frames and functions.\nTo assign a value to an object use &lt;- or =. For example, vectors x and y can be created as follows using the c() function. You can run the code by clicking Run Code.\n\n\n\nShow R code\n# c() function is used to concatenate elements together\nx &lt;- c(1,2,3,4,5)\nx\ny = c(5,4,3,2,1)\ny\n\n\n\n\nTo find out the length of a vector, you can use the function length():\n\n\n\nShow R code\nlength(x)\n\n\n\n\nVectors of sequential numbers can be built up using :, or seq(), and rep() functions:\n\n\n\nShow R code\n# : assigns consecutive integers\nx &lt;- 1:5\nx\ny &lt;- 5:1\ny\n\n# rev() function reverses the order of elements in a vector\ny &lt;- rev(x)\ny\n\n# seq() function generates a sequence from the starting point of the sequence to the ending \n# point for the sequence by given increment\nseq(from = 1, to = 5, by = 1)\nseq (1, 5, 1)\n\n# rep() function replicates elements\nrep(1, 5)\nrep(x, times=2)\nrep(x, each=2)\n\n\n\n\nTo learn more about vectors and how to create and use matrices, arrays, lists, factors, data frames and functions see the comprehensive web tutorial Introduction to R available from the CRAN webpage.\nYou can now try creating a vector or another object using this live coding box. You can run your code by clicking Run Code and you can empty your coding box by clicking Start Over:\n\n\n\n\n\nIf there is an error in the code, an error message will appear with a line number in the R coding box to help you diagnose the problem.\nNote that learnr remembers what you typed in the exercise boxes unless you click the Start Over button, either on top of a coding box (to reset that exercise) or under the main menu on the left hand side of this document (to reset all exercises). However, to make sure you do not lose your R code you can save your code by typing it in the space for R exercise code within the Learnr tutorial and saving a copy of the Learnr tutorial.\n\n\n4.2 4.2. Accessing data\n\n4.2.1 4.2.1. Reading data from files\nAs demonstrated above, small amounts of data can be entered using functions such as c(), matrix() and array(). However, R is not very useful as a database or for data entry.\nInstead, it is usually better to use Excel (or another spreadsheet program) for inputting data, saved as a CSV file, which is then imported into R. First, save the data to your working directory. You can use the getwd() function in the console to check what is your current working directory. If needed, you can use the setwd() function to change your working directory to another folder on your computer. Note that R uses forward slash / or two backslashes \\\\ instead of the backslash \\ in its path names. Alternatively, you can choose a working directory by navigating to Session &gt; Set Working Directory &gt; Choose Directory from your menu bar. You can then use the read.csv() function to read in a file from your working directory. Let us read in the data from the lymphoma.csv file. This data file is available for download on the provided Github. You will need to amend the coding below to align to your file directory, remove the hashes before “lymphoma” or “setwd” to test the coding using direct file path and setting the working directory.\nNote that you can also read this file in directly from Github, as given below. We do, however, recommend you practice importing files directly from a folder location.\n\n\n\nShow R code\n# to get your working directory\ngetwd()\n\n# Option 1 : read in the lymphoma.csv file using the read.csv() function and the full pathname\n# Please replace the example pathname with the pathname to your working directory\n# lymphoma &lt;- read.csv(\"C:/Users/R files/lymphoma.csv\", header=T) # Windows\n# lymphoma &lt;- read.csv(\"/Volumes/R files/lymphoma.csv\", header=T) # Mac\n\n# Option 2: use the setwd() command to change your working directory\n# Please replace the example pathname with the pathname to your working directory\n# setwd(\"C:/Users/R files/\") # Windows\n# setwd(\"/Volumes/R files/\") # Mac\n# read in the lymphoma.csv file using the read.csv() function\n# lymphoma &lt;- read.csv(\"lymphoma.csv\", header=T)\n\n#Option 3 (direct from Github)\nlymphoma &lt;- read.csv(\"https://raw.githubusercontent.com/NicoleDeLaMata/AdvancedSurvival/refs/heads/Data/lymphoma.csv\", header=T)\n\n\n\n\nOnce you have read in your data file, you can use some of the following functions to familiarise yourself with other ways to import. Remember to remove the pre-ceding hashes to each line:\n\n\n\nShow R code\n# head() function returns the first rows of a data frame (six by default)\nhead(lymphoma)\n\n# tail() function returns the last rows of a data frame, you can specify how many rows you \n# want to see by adding n \ntail(lymphoma, n=10)\n\n# nrow() function returns the number of rows\nnrow(lymphoma)\n\n# names() function returns the names of all the variables in the data set, and works also for 1-dimensional objects (vector, list)\nnames(lymphoma)\n\n# for 2-dimensional objects that have a column dimension (matrix, data frame) you should however use the specific colnames() function\ncolnames(lymphoma)\n\n# str() function returns the structure of the data set, i.e., data type of each attribute\nstr(lymphoma)\n\n# summary() function returns a set of descriptive statistics depending on the type of variable\nsummary(lymphoma)\n\n\n\n\nTo learn more about other ways of inputting data to R see the Introduction to R.\n\n\n4.2.2 4.2.2. R built-in datasets\nR also supplies hundreds of built-in datasets, both in the package datasets (installed with base distribution) and other available packages. To see the list of datasets currently available through all loaded packages, you can run data() command by clicking Run Code:\n\n\n\nShow R code\ndata()\n\n# you can use this command to see all the packages available in R\ndata(package = .packages(all.available = TRUE))\n\n\n\n\nFor example, the dataset cars used in the R Markdown template is among the datasets readily available in R.\nTake a closer look at some of the datasets available by applying for example the head(), tail(), nrow(), names(), str() and summary() functions presented above:\n\n\n\n\n\n\n\n\n4.3 4.3. Data manipulation\n\n4.3.1 4.3.1. Dplyr package\nBefore carrying out your data analysis, you often need to clean or transform data in preparation for your analysis. The dplyr package is very useful for such data manipulation as it includes readily available functions for commonly required data manipulation tasks.\nFunctions in dplyr process faster than base R functions as they are written in a more computationally efficient manner. See below some examples of these functions using the starwars dataset available in the dplyr package. When carrying out your analysis, remember to first install and load the package dplyr (you can use the code available from the tutorial set up in the beginning of this tutorial).\n\n\n\nShow R code\n# tibble() is a cross between the head() and str() functions\ntibble(starwars)\n\n# starwars dataset has 87 rows and 14 columns with each row describing a Star Wars character\ndim(starwars)\n\n# gives dimensions as above, variable type, and lists first few rows of obs\nglimpse(starwars)\n\n# filter() function allows to you filter or select a subset of rows in a data frame, e.g. \n# all female Star Wars characters\nfilter(starwars, sex == \"female\")\n\n# arrange() function rearranges the data frame rows, e.g., sort the rows by sex and name\nstarwars_bysex &lt;- arrange(starwars, sex, name)\nstarwars_bysex\n\n# select() function allows you to select the variables that you are interested in, \n# e.g., sex and name, so you do not have to scroll through all the columns in the data\nselect(starwars_bysex, sex, name)\n\n# you can use the select() function together with the everything() function to place the \n# variables you are interested in first while keeping all the variables in the data frame\nselect(starwars_bysex, sex, name, everything())\n\n# rename() function allows you to rename variables, e.g. rename height as height_cm\nstarwars_renamed &lt;- rename(starwars, height_cm = height)\n\n# using select() to output name and height_cm first\nselect(starwars_renamed, name, height_cm, everything())\n\n# mutate() function allows you to add new columns to the data frame that are functions \n# of existing columns\nstarwars_renamed &lt;- mutate(starwars_renamed, height_m = height_cm / 100)\nstarwars_renamed &lt;- mutate(starwars_renamed, BMI = mass / (height_m^2))\n\n# using select() to output name, mass, height_cm and BMI first\nselect(starwars_renamed, name, mass, height_m, BMI, everything())\n\n# summarise() function allows you to summarise data frame columns, e.g. to calculate \n# a mean of BMI in the data\n\n# note that if the variable you want to summarise has missing values, you need to include \n# the option 'na.rm=TRUE'\nsummarise(starwars_renamed, mean(BMI, na.rm=TRUE))\n\n# you can create a dichotomous overweight variable using the mutate() and if_else() functions\nstarwars_renamed &lt;- mutate(starwars_renamed, overweight = if_else(BMI &gt;= 25, 1, 0))\n\n# you can convert the numeric overweight variable to a factor variable using factor() function\nstarwars_renamed &lt;- mutate(starwars_renamed, BMI2 = factor(overweight,\n                           levels = c(0, 1),\n                           labels = c(\"normal weight\", \"overweight\")))\n\n# you can create categorical variables using the mutate() and case_when() functions\nstarwars_renamed &lt;- mutate(starwars_renamed, BMI3 = case_when(\n      (BMI &gt;= 0) & (BMI &lt; 25) ~ 'normal weight', \n      (BMI &gt;= 25) & (BMI &lt; 30) ~ 'overweight', \n      (BMI &gt;= 30) ~ 'obese',\n      TRUE ~ 'NA'\n))\n\n# alternatively you can use cut() and factor() functions\nstarwars_renamed &lt;- mutate(starwars_renamed, BMI3=cut(BMI,  # Create BMI3 based on cutting BMI at the specified break points\n                    breaks=c(0,25,30,Inf),\n                    right=FALSE), # We want the intervals to be closed on the left, e.g. 0 to &lt;25\n                    BMI3=factor(BMI3,             # Convert BMI3 to a factor variable with the specified labels\n                       labels=c('normal weight',\n                                'overweight',\n                                'obese')))\n\n# using select() to output name, mass, height_cm, BMI, overweight and BMI3 variables first\nselect(starwars_renamed, name, mass, height_m, BMI, overweight, BMI2, BMI3, everything())\n\n\n\n\n\n\n4.3.2 4.3.2. The pipe %&gt;%\nAll of the dplyr functions discussed above take a data frame as the first argument. The modified data frames are saved as intermediate objects that in turn are used by other dplyr functions.\nThere is, however, a more efficient way for chaining commands, called the forward-pipe operator, %&gt;%, or simply the pipe, available from the magrittr package, and also automatically made available when you load dplyr package. This operator will forward or pipe a value or a result from one step into the next. See below how part of the code above can be simplified using the pipe:\n\n\n\nShow R code\n# starwars_bysex &lt;- arrange(starwars, sex, name)\n# starwars_bysex\n# select(starwars_bysex, sex, name, everything())\n\n# The commands above can be chained in the following way using %&gt;%\nstarwars %&gt;% \n  arrange(sex, name) %&gt;% \n  select(sex, name, everything())\n\n# starwars_renamed &lt;- rename(starwars, height_cm = height)\n# starwars_renamed &lt;- mutate(starwars_renamed, height_m = height_cm / 100)\n# starwars_renamed &lt;- mutate(starwars_renamed, BMI = mass / (height_m^2))\n# starwars_renamed &lt;- mutate(starwars_renamed, overweight = if_else(BMI &gt;= 25, 1, 0))\n# select(starwars_renamed, name,  mass, height_m, BMI, overweight, everything())\n\n# The commands above can be chained in the following way using %&gt;%\nstarwars %&gt;% \n  rename(height_cm = height) %&gt;% \n  mutate(height_m = height_cm / 100) %&gt;% \n  mutate(BMI = mass / (height_m^2)) %&gt;% \n  mutate(overweight = if_else(BMI &gt;= 25, 1, 0)) %&gt;% \n  select(name, mass, height_m, BMI, overweight, everything())\n\n# Remember that you need to assign the modified data frame into an object to be able to use it later on\nstarwars_saved &lt;- starwars %&gt;% \n                    rename(height_cm = height) %&gt;% \n                    mutate(height_m = height_cm / 100) %&gt;% \n                    mutate(BMI = mass / (height_m^2)) %&gt;% \n                    mutate(overweight = if_else(BMI &gt;= 25, 1, 0)) %&gt;% \n                    select(name, mass, height_m, BMI, overweight, everything())\n\n\n\n\nYou can learn more about other functions available in dplyr and see examples of their use here.\nTry using the dplyr functions and piping. You can, for example, try sorting the starwars data frame by the BMI variable created above or try applying some of the other functions to these data:\n\n\n\n\n\n\n\n\n4.4 4.4. Summarising data\nTo summarise data using simple descriptive statistics, e.g., mean, SD, median, IQR, you can use the summary() function which comes with the base distribution. You can also the skim() function from the skimr() package:\n\n\n\nShow R code\n# summarising BMI in the Starwars dataset\n\n# using the summary() function\nsummary(starwars_saved$BMI)\n\n# using the skim() function\nskim(starwars_saved, BMI)\n\n\n\n\nTo create a frequency table for a categorical variable, you can for example use the tabyl() function from the janitor() package. It is a better version of the table() function which comes with the base distribution.\n\n\n\nShow R code\n# summarising BMI in the Starwars dataset\ntabyl(starwars_saved, overweight)\n\n\n\n\n\n\n4.5 4.5. Data analysis and visualisation in R\n\n4.5.1 4.5.1. Data analysis\nAnalyses, models and graphs can also be stored as objects in R. For example, the following code fits a linear regression model for speed and distance variables in the cars data using the lm() function. The result is an lm object that is stored into the object named results:\n\n\n\nShow R code\n# In R's formula notation where we have our outcome variable on the left hand side of the equation \n# and the explanatory variables on the right hand side of the tilde.\nresults &lt;- lm(dist ~ speed, data = cars)\nresults\n\n# summary() function provides more detailed information on the model's performance and coefficients\nsummary(results)\n\n\n\n\n\n\n4.5.2 4.5.2. Data visualisation\nWe can visualise the data and analysis results by creating histograms or boxplots using the hist() and boxplot() functions, or by creating a simple plot of the two variables using the plot() function, available from base graphics, and adding a regression line to the plot:\n\n\n\nShow R code\n# hist() function for histograms\nhist(cars$speed)\nhist(cars$dist)\n\n# boxplot() function\nboxplot(cars$speed)\nboxplot(cars$dist)\n\n# plot() function for plotting two variables\nplot(cars$speed, cars$dist)\n# adding a regression line to the plot\nabline(lm(dist ~ speed, data = cars))\n\n\n\n\nWe can also do the same visualisation using ggplot() function from the ggplot2 package.\n\n\n\nShow R code\nggplot(cars, aes(x=speed, y=dist)) + geom_point(shape=1) + geom_smooth(method=\"lm\")\n\n\n\n\n\n\n\n4.6 4.6. Good programming practices\nWe should learn and apply good programming practices to write R code that is as easy to read and replicate as possible.\nGood practices should be applied every time we write a program. Please use the following resources to familiarise yourself with good practices when writing a program in R:\nR Tidyverse style guide. R code - best practices\nDuring this short course, we will make use of these R basics and gain practice in good coding as we learn how to analyse data using R."
  },
  {
    "objectID": "Multistate.html",
    "href": "Multistate.html",
    "title": "3 Multi-state modelling",
    "section": "",
    "text": "Note\n\n\n\nBy the end of this lecture, you should be able to:\n\nUnderstand the concepts of multi-state survival analysis\nConstruct a state-space that reflects a multi-state model\nUnderstand marginal and conditional multi-state parameters\nProduce Aalen-Johansen estimates for probability in state\nRestructure data in preparation for multi-state model analysis\nApply Cox proportional hazards and flexible parametric models to estimate covariate effects on transitions",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "3 Multi-state modelling"
    ]
  },
  {
    "objectID": "Multistate.html#learning-objectives",
    "href": "Multistate.html#learning-objectives",
    "title": "3 Multi-state modelling",
    "section": "",
    "text": "Note\n\n\n\nBy the end of this lecture, you should be able to:\n\nUnderstand the concepts of multi-state survival analysis\nConstruct a state-space that reflects a multi-state model\nUnderstand marginal and conditional multi-state parameters\nProduce Aalen-Johansen estimates for probability in state\nRestructure data in preparation for multi-state model analysis\nApply Cox proportional hazards and flexible parametric models to estimate covariate effects on transitions",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "3 Multi-state modelling"
    ]
  },
  {
    "objectID": "Multistate.html#worked-examples",
    "href": "Multistate.html#worked-examples",
    "title": "3 Multi-state modelling",
    "section": "2 Worked examples",
    "text": "2 Worked examples",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "3 Multi-state modelling"
    ]
  },
  {
    "objectID": "Multistate.html#colon-cancer",
    "href": "Multistate.html#colon-cancer",
    "title": "3 Multi-state modelling",
    "section": "3 Colon cancer",
    "text": "3 Colon cancer\nLet’s start with loading the packages and data\n\n\nShow R code\n#Load packages\nlibrary(dplyr)\nlibrary(tidyr)\nlibrary(ggplot2)\nlibrary(survival)\nlibrary(mstate)\nlibrary(flexsurv)\n\n\n#Load colon cancer data\ncolon &lt;- survival::colon\n\n\nBelow is the list of variables.\nid: id\nstudy: 1 for all patients\nrx: Treatment - Obs(ervation), Lev(amisole), Lev(amisole)+5-FU\nsex: 1=male\nage: in years\nobstruct: obstruction of colon by tumour\nperfor: perforation of colon\nadhere: adherence to nearby organs\nnodes: number of lymph nodes with detectable cancer\ntime: days until event or censoring status: censoring status\ndiffer: differentiation of tumour (1=well, 2=moderate, 3=poor)\nextent: Extent of local spread (1=submucosa, 2=muscle, 3=serosa, 4=contiguous structures)\nsurg: time from surgery to registration (0=short, 1=long)\nnode4: more than 4 positive lymph nodes\netype: event type: 1=recurrence, 2=death\nWe will have a quick look at how the data is set up.\n\n\nShow R code\n#View first ten rows of data\nprint(colon[1:10,])\n\n\n   id study      rx sex age obstruct perfor adhere nodes status differ extent\n1   1     1 Lev+5FU   1  43        0      0      0     5      1      2      3\n2   1     1 Lev+5FU   1  43        0      0      0     5      1      2      3\n3   2     1 Lev+5FU   1  63        0      0      0     1      0      2      3\n4   2     1 Lev+5FU   1  63        0      0      0     1      0      2      3\n5   3     1     Obs   0  71        0      0      1     7      1      2      2\n6   3     1     Obs   0  71        0      0      1     7      1      2      2\n7   4     1 Lev+5FU   0  66        1      0      0     6      1      2      3\n8   4     1 Lev+5FU   0  66        1      0      0     6      1      2      3\n9   5     1     Obs   1  69        0      0      0    22      1      2      3\n10  5     1     Obs   1  69        0      0      0    22      1      2      3\n   surg node4 time etype\n1     0     1 1521     2\n2     0     1  968     1\n3     0     0 3087     2\n4     0     0 3087     1\n5     0     1  963     2\n6     0     1  542     1\n7     1     1  293     2\n8     1     1  245     1\n9     1     1  659     2\n10    1     1  523     1\n\n\nMostly importantly, we see that id defines each individual, time is given in days and etype defines the states of interest.\nSome initial data checks should be performed to ensure the times are expected and align with our proposed state space, defined below\n\n\nShow R code\n#State space figure\nstates &lt;- c(\"Disease-free\\n(929)\", \"Recurrence\", \"Death\")\nsmat &lt;- matrix(0, 3, 3, dimnames=list(from=states, to=states))\nsmat[1, 2:3] &lt;- 1; smat[2, 3] &lt;- 1\nsmat\n\n\n                     to\nfrom                  Disease-free\\n(929) Recurrence Death\n  Disease-free\\n(929)                   0          1     1\n  Recurrence                            0          0     1\n  Death                                 0          0     0\n\n\nShow R code\n#smat is a matrix with a 1 for any valid transition, 0 otherwise\n#| fig-width: 2\n#| fig-height: 3\nstatefig(1:2, smat)\n\n# Add numbers to arrows manually\ntext(x = 0.5, y = 0.68, labels = \"468\")\ntext(x = 0.5, y = 0.3, labels = \"38\")\ntext(x = 0.8, y = 0.5, labels = \"414\")\n\n\n\n\n\n\n\n\n\nWe will now check that there are not times are not tied and, if so, fix the times tied so recurrence occur prior to death.\n\n\nShow R code\n#Divide the data into the two states\nc1 &lt;- subset(colon, etype== 1) # recurrence\nc2 &lt;- subset(colon, etype== 2) # death\n\n#Check for tied times\ntied.id &lt;- (c1$time == c2$time & c1$status==1 & c2$status==1)\ntable(tied.id)\n\n\ntied.id\nFALSE  TRUE \n  924     5 \n\n\nShow R code\n# There are 5 subjects with recurrence coded on the same day as death.\n# Make them recur one day earlier than their death (avoid 0 length intervals)\nc1$time[tied.id] &lt;- c1$time[tied.id] -1\n\n\n\n\n\n\n\n\nTipHint\n\n\n\nOther important data checks for time include checking preceding and proceeding states (e.g. death is always the state with the maximum time), deciding order of events when tied times, and censoring event times.\n\n\nCreate a dataset that consecutive times, running from time1 to time2, and state variable indicating which event occured.\n\n\nShow R code\n# Create the counting process dataset\ncdata &lt;- tmerge(subset(c2, ,-c(study, time, status, etype)),\nc2, id=id, death= event(time, status),\noptions=list(tstart=\"time1\", tstop=\"time2\"))\ncdata &lt;- tmerge(cdata, c1, id= id, recur= event(time, status),\ntd.recur = tdc(time))\n\n#Check transitions\ntable(cdata$recur, cdata$death)\n\n\n   \n      0   1\n  0 475 452\n  1 468   0\n\n\nShow R code\n# The table above verifies no tied event times\n# Make the state variable\ncdata$state &lt;- with(cdata, factor(recur+ 2*death, 0:2,\nc(\"censor\", \"recur\", \"death\")))\n\n\nWe then proceed with re-adjusting the variables included to prepare for modelling, including the time variable from days to years.\n\n\nShow R code\n# Create some simple variables\ncdata$age10 &lt;- cdata$age/10 # age in decades\ncdata$male &lt;- 1*(cdata$sex ==1) # 0/1: male\ncdata$trt &lt;- 1*(cdata$rx == \"Lev+5FU\")\n# a 0/1 treatment variable, 1=Lev+5FU, 0= Observation or Lev\n# Output in years gives simpler plots\ncdata$time1 &lt;- cdata$time1/365.25\ncdata$time2 &lt;- cdata$time2/365.25\n\n\nWe can check the time1, time2 and state variables are working as we expected.\n\n\nShow R code\n# Check for consistency\ncheck &lt;-survcheck(Surv(time1, time2, state) ~ 1, cdata, id=id)\ncheck\n\n\nCall:\nsurvcheck(formula = Surv(time1, time2, state) ~ 1, data = cdata, \n    id = id)\n\nUnique identifiers       Observations        Transitions \n               929               1395                920 \n\nTransitions table:\n       to\nfrom    recur death (censored)\n  (s0)    468    38        423\n  recur     0   414         52\n  death     0     0          0\n\nNumber of subjects with 0, 1, ... transitions to each state:\n       count\nstate     0   1   2\n  recur 461 468   0\n  death 477 452   0\n  (any) 423  92 414\n\n\nNow our data is ready to produce Aalen-Johansen estimates.\n\n\nShow R code\n#Aalen-Johansen estimates\naj0 &lt;- survfit(Surv(time1, time2, state) ~1, data=cdata, id=id) # overall\naj1 &lt;- survfit(Surv(time1, time2, state) ~ trt, data=cdata, id=id) # by arm\n\n#Graph settings\nmycolor &lt;- c(\"#440154FF\",\"#32648EFF\",\"#21908CFF\",\"#5DC863FF\",\"#DCE318FF\",\"#FFFFFF\")\nopar &lt;- par(no.readonly = TRUE)\n\n#Probability in state graphs - overall\n#| fig-width: 2\n#| fig-height: 3\nplot(aj0, noplot=NULL, lwd=2, col=mycolor[c(2,4, 1)],\nxlab=\"Years since enrollment\", ylab=\"Probability in state\")\n# the noplot=NULL option results in s(0) line being plotted\nlegend(4, 1, c(\"Alive w/o recurrence\", \"Recurrence\", \"Death\"), lwd=2,\ncol=mycolor[c(2, 4, 1)], bty='n')\n\n\n\n\n\n\n\n\n\nShow R code\n#Probability in state graphs - by treatment\n#| fig-width: 2\n#| fig-height: 3\nplot(aj1, noplot=NULL, lwd=2, lty=1:2, col=mycolor[c(2,2,4,4,1,1)],\nxlab=\"Years since enrollment\", ylab=\"Probability in state\")\nlegend(4.5, 1, c(\"Alive, control\", \"Alive, 5FU+Lev\",  \"Recurrence, Control\", \"Recurrence, 5FU+Lev\",\n\"Death, Control\", \"Death, 5FU+Lev\"),\nlwd=2, lty=1:2, col=mycolor[c(2,2,4,4,1,1)], bty='n')\n\n\n\n\n\n\n\n\n\nProducing the expected time in state also can call upon these output from survfit(). We can also add more covariates to see how the expected mean time changes.\n\n\nShow R code\n#Expected time in state\nprint(aj1, rmean= 8, digits=2) #print sojourn time restricted to 8 years\n\n\nCall: survfit(formula = Surv(time1, time2, state) ~ trt, data = cdata, \n    id = id)\n\n               n nevent rmean se(rmean)*\ntrt=0, (s0)  972      0  4.15      0.133\ntrt=1, (s0)  423      0  5.24      0.186\ntrt=0, recur 972    349  0.93      0.059\ntrt=1, recur 423    119  0.52      0.066\ntrt=0, death 972    329  2.92      0.118\ntrt=1, death 423    123  2.24      0.165\n   *restricted mean time in state (max time = 8 )\n\n\nShow R code\n#Adjusted AJ for expected times\naj2 &lt;- survfit(Surv(time1, time2, state) ~ trt+male, data=cdata, id=id) # by arm\n\n#Print expected times\nprint(aj2, rmean= 8, digits=2) #print sojourn time restricted to 8 years\n\n\nCall: survfit(formula = Surv(time1, time2, state) ~ trt + male, data = cdata, \n    id = id)\n\n                       n nevent rmean se(rmean)*\ntrt=0, male=0, (s0)  436      0  4.24      0.202\ntrt=0, male=1, (s0)  536      0  4.07      0.177\ntrt=1, male=0, (s0)  237      0  4.76      0.263\ntrt=1, male=1, (s0)  186      0  5.79      0.256\ntrt=0, male=0, recur 436    155  1.01      0.095\ntrt=0, male=1, recur 536    194  0.87      0.074\ntrt=1, male=0, recur 237     74  0.63      0.102\ntrt=1, male=1, recur 186     45  0.39      0.073\ntrt=0, male=0, death 436    140  2.75      0.176\ntrt=0, male=1, death 536    189  3.06      0.160\ntrt=1, male=0, death 237     75  2.61      0.236\ntrt=1, male=1, death 186     48  1.82      0.223\n   *restricted mean time in state (max time = 8 )\n\n\nWe see that rmean adds up to 8 for each stratum created. However, it can becomes problematic to calculate expected mean times in state using Aalen-Johansen if you’d like to adjust for many other factors. The covariates function as stratum, and so begin to split the data and events quite rapidly. We also don’t have the functionality of to create a new dataframe to predict upon when using Aalen-Johansen (we will see how we can do this using Cox or flexible parametric).\nNow, let’s fit a multitstate hazards model (i.e. Cox proportional hazards).\n\n\nShow R code\n# fit the model\ncfit &lt;- coxph(Surv(time1, time2, state) ~ trt +age10 + male + extent + node4,\ndata=cdata, id=id)\nprint(cfit, digits=2)\n\n\nCall:\ncoxph(formula = Surv(time1, time2, state) ~ trt + age10 + male + \n    extent + node4, data = cdata, id = id)\n\n        \n1:2        coef exp(coef) se(coef) robust se    z      p\n  trt    -0.507     0.602    0.106     0.108 -4.7  3e-06\n  age10  -0.032     0.969    0.039     0.042 -0.8    0.5\n  male   -0.089     0.915    0.093     0.095 -0.9    0.3\n  extent  0.532     1.703    0.113     0.122  4.4  1e-05\n  node4   0.835     2.305    0.096     0.100  8.4 &lt;2e-16\n\n        \n1:3      coef exp(coef) se(coef) robust se   z     p\n  trt    0.02      1.02     0.34      0.34 0.1   1.0\n  age10  0.88      2.40     0.20      0.19 4.6 4e-06\n  male   0.45      1.57     0.34      0.34 1.3   0.2\n  extent 0.47      1.60     0.39      0.51 0.9   0.4\n  node4  0.64      1.90     0.38      0.39 1.6   0.1\n\n        \n2:3       coef exp(coef) se(coef) robust se   z     p\n  trt    0.288     1.334    0.114     0.119 2.4  0.02\n  age10  0.105     1.111    0.040     0.044 2.4  0.02\n  male   0.196     1.216    0.101     0.094 2.1  0.04\n  extent 0.084     1.088    0.106     0.112 0.8  0.45\n  node4  0.434     1.544    0.104     0.101 4.3 2e-05\n\n States:  1= (s0), 2= recur, 3= death \n\nLikelihood ratio test=189  on 15 df, p=&lt;2e-16\nn= 1395, unique id= 929, number of events= 920 \n\n\nShow R code\nsummary(cfit)\n\n\nCall:\ncoxph(formula = Surv(time1, time2, state) ~ trt + age10 + male + \n    extent + node4, data = cdata, id = id)\n\n  n= 1395, number of events= 920 \n\n               coef exp(coef) se(coef) robust se      z Pr(&gt;|z|)    \ntrt_1:2    -0.50732   0.60211  0.10645   0.10788 -4.703 2.57e-06 ***\nage10_1:2  -0.03171   0.96879  0.03902   0.04199 -0.755   0.4502    \nmale_1:2   -0.08858   0.91523  0.09271   0.09454 -0.937   0.3488    \nextent_1:2  0.53249   1.70316  0.11332   0.12223  4.356 1.32e-05 ***\nnode4_1:2   0.83503   2.30489  0.09614   0.09975  8.371  &lt; 2e-16 ***\ntrt_1:3     0.02025   1.02046  0.33595   0.33520  0.060   0.9518    \nage10_1:3   0.87475   2.39829  0.19574   0.19049  4.592 4.39e-06 ***\nmale_1:3    0.45226   1.57186  0.33650   0.34432  1.313   0.1890    \nextent_1:3  0.46911   1.59858  0.38750   0.50819  0.923   0.3559    \nnode4_1:3   0.64311   1.90238  0.37459   0.39068  1.646   0.0997 .  \ntrt_2:3     0.28841   1.33431  0.11431   0.11860  2.432   0.0150 *  \nage10_2:3   0.10482   1.11051  0.03995   0.04354  2.407   0.0161 *  \nmale_2:3    0.19550   1.21592  0.10079   0.09393  2.081   0.0374 *  \nextent_2:3  0.08431   1.08797  0.10604   0.11154  0.756   0.4497    \nnode4_2:3   0.43444   1.54409  0.10423   0.10092  4.305 1.67e-05 ***\n---\nSignif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n\n           exp(coef) exp(-coef) lower .95 upper .95\ntrt_1:2       0.6021     1.6608    0.4874    0.7439\nage10_1:2     0.9688     1.0322    0.8922    1.0519\nmale_1:2      0.9152     1.0926    0.7604    1.1015\nextent_1:2    1.7032     0.5871    1.3403    2.1642\nnode4_1:2     2.3049     0.4339    1.8956    2.8026\ntrt_1:3       1.0205     0.9799    0.5290    1.9684\nage10_1:3     2.3983     0.4170    1.6510    3.4837\nmale_1:3      1.5719     0.6362    0.8004    3.0867\nextent_1:3    1.5986     0.6256    0.5904    4.3282\nnode4_1:3     1.9024     0.5257    0.8846    4.0911\ntrt_2:3       1.3343     0.7495    1.0575    1.6835\nage10_2:3     1.1105     0.9005    1.0197    1.2094\nmale_2:3      1.2159     0.8224    1.0115    1.4617\nextent_2:3    1.0880     0.9191    0.8743    1.3538\nnode4_2:3     1.5441     0.6476    1.2670    1.8818\n\nConcordance= 0.647  (se = 0.011 )\nLikelihood ratio test= 188.5  on 15 df,   p=&lt;2e-16\nWald test            = 173.9  on 15 df,   p=&lt;2e-16\nScore (logrank) test = 191.6  on 15 df,   p=&lt;2e-16,   Robust = 154.6  p=&lt;2e-16\n\n  (Note: the likelihood ratio and score tests assume independence of\n     observations within a cluster, the Wald and robust score tests do not).\n\n\nThe treatment effect from transition 1 (Disease-free) to 2 (Recurrence) has HR estimate of 0.60 (95%CI: 0.49, 0.74) and for transition 2 (Recurrence) to 3 (Death) has HR estimate of 1.33 (95%CI: 1.06, 1.68).\nWe can create a forest plot of the HR estimates and their 95%CI.\n\n\nShow R code\n# get the HR, and lower and upper limit\ntemp &lt;- summary(cfit)$conf.int[ , c(1,3,4)]\n\n# generate the forest plot\npar(mar=c(5,7, 1, 1)) # more room for y axis labels\nyy &lt;- c(outer(5:1, c(12, 0, 6), \"+\"))\n\n#| fig-width: 2\n#| fig-height: 3\nplot(c(.5,4), range(yy), log='x', type=\"n\", xlab=\"Hazard ratio\", ylab=\"\", yaxt= 'n')\naxis(2, at=yy, label=rep(c(\"Lev+5FU\", \"Age\", \"Male\", \"Extent\", \"&gt;4 Nodes\") ,3), las=2)\npoints(temp[,1], yy, pch=19)\nsegments(temp[,2], yy, temp[,3], yy, lwd=1.5)\nabline(h=c(6,12), lwd=2, lty=2, col=mycolor[5])\nabline(v=1, lty=3)\ntext(c(2.5, 2.5, 3), c(16, 10, 5), c(\"Disease-free:Recurrence\", \"Recurrence:Death\",\n\"Disease-free:Death\"))\n\n\n\n\n\n\n\n\n\nWe can use this model to produce predicted probability in state and expected time in state. For this example, we have simplified the model.\n\n\nShow R code\n#Simplified model\ncfit2 &lt;- coxph(Surv(time1, time2, state) ~ trt + extent + node4, data=cdata, id=id)\n\n#Create dummy data\ndummy &lt;- expand.grid(trt=0:1, extent=1:4, node4= 0:1) # 16 combinations\n\n# Predicted probability in state from the MSH model\ncsurv2 &lt;- survfit(cfit2, newdata=dummy) # 16 predicted curves\n\n\nThe resulting csurv2 does produce probability in state from the Cox model, but this is only until the max time in the original patient dataset (cdata).\n\n\nShow R code\n# calculate the sojourn time and assemble it into a matrix\ntemp &lt;- summary(csurv2, rmean=8)$table[,\"rmean\"]\nsojourn &lt;- matrix(temp, 16, 3,\ndimnames=list(NULL, c(\"disease-free\", \"recurrence\", \"death\")))\nsdata &lt;- cbind(dummy, round(sojourn,2)) # add this to the dummy data frame\nsdata\n\n\n   trt extent node4 disease-free recurrence death\n1    0      1     0         6.57       0.49  0.94\n2    1      1     0         7.04       0.25  0.70\n3    0      2     0         5.75       0.70  1.55\n4    1      2     0         6.47       0.37  1.16\n5    0      3     0         4.62       0.94  2.44\n6    1      3     0         5.61       0.52  1.86\n7    0      4     0         3.26       1.16  3.58\n8    1      4     0         4.46       0.69  2.86\n9    0      1     1         5.17       0.70  2.13\n10   1      1     1         6.05       0.37  1.57\n11   0      2     1         3.89       0.89  3.22\n12   1      2     1         5.03       0.51  2.46\n13   0      3     1         2.50       1.00  4.49\n14   1      3     1         3.73       0.63  3.64\n15   0      4     1         1.36       0.99  5.64\n16   1      4     1         2.36       0.69  4.94\n\n\nWe can see for each combination of covariates in our dummy data, we have the predicted expected time in state, which adds up to 8 years across the three states. The below summarises the expected time in state into a bar plot.\n\n\nShow R code\n# plot the sojourn\nrownames(sojourn) &lt;- paste(\nrep(rep(c(\"T1\", \"T2\", \"T2\", \"T4\"), each=2),2), rep(c(\"/&lt;=4 nodes\",\"/&gt; 4 nodes\"), each=8),\nrep(c(\"/Control\", \"/Lev+5FU\"), 8))\n\n# put the controls together\nxx &lt;- rev(c(1,3,5,7,2,4,6,8))\nxx &lt;- c(xx+8, xx)\npar(mar=c(2, 11, 0.5, 0.5))\n\n#| fig-width: 2\n#| fig-height: 3\nbarplot(t(sojourn[xx,]), horiz=TRUE, col=mycolor[c(5, 1, 6)],\nlas=1)\nabline(h=c(4.9, 9.7,14.5), lwd=2, col=mycolor[3])\n\n\n\n\n\n\n\n\n\nWe can now replicate the results using the mstate package and see the difference in approach and output.\nFirst we will create the transition matrix, which assigns a consecutive number to each of the transitions and list the element where the transition exists in each row of the matrix. This functions differently to the above, which was mostly aesthetic and to understand the data layout.\n\n\nShow R code\n#Define transition matrix\ntmat &lt;- transMat( x=list(c(2,3), c(3), c()), names=c(\"Alive\", \"Recur\", \"Death\"))\ntmat\n\n\n       to\nfrom    Alive Recur Death\n  Alive    NA     1     2\n  Recur    NA    NA     3\n  Death    NA    NA    NA",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "3 Multi-state modelling"
    ]
  },
  {
    "objectID": "Multistate.html#practical-exercises",
    "href": "Multistate.html#practical-exercises",
    "title": "3 Multi-state modelling",
    "section": "4 Practical exercises",
    "text": "4 Practical exercises\nPut here",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state",
      "3 Multi-state modelling"
    ]
  },
  {
    "objectID": "OverviewD2.html",
    "href": "OverviewD2.html",
    "title": "Day 2",
    "section": "",
    "text": "Welcome to Day 2 of the Advanced Survival Concepts and Analysis short course for 2026.\nIn today’s topics we will learn about:\n- Competing risks models\n- Flexible parametric survival modelling (second lecture)\n- Multi-state modelling\nWe will cover the theorectical concepts and practical applications. You will also have take-home exercises to practise the concepts on data in your own time and at your own pace.\nWe are building upon the advanced survival concepts and analysis we have covered in Day 1.",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state"
    ]
  },
  {
    "objectID": "OverviewD2.html#todays-topics",
    "href": "OverviewD2.html#todays-topics",
    "title": "Day 2",
    "section": "",
    "text": "Welcome to Day 2 of the Advanced Survival Concepts and Analysis short course for 2026.\nIn today’s topics we will learn about:\n- Competing risks models\n- Flexible parametric survival modelling (second lecture)\n- Multi-state modelling\nWe will cover the theorectical concepts and practical applications. You will also have take-home exercises to practise the concepts on data in your own time and at your own pace.\nWe are building upon the advanced survival concepts and analysis we have covered in Day 1.",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state"
    ]
  },
  {
    "objectID": "OverviewD2.html#by-the-end-of-today",
    "href": "OverviewD2.html#by-the-end-of-today",
    "title": "Day 2",
    "section": "2 By the end of today",
    "text": "2 By the end of today\nWe would expect you to have a working understanding of:\n\nCompeting risks scenarios and modelling approaches\nFlexible parametric approaches to competing risks and other scenarios\nConstructing multi-state models and interpretation for more than two states and recurrent events",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state"
    ]
  },
  {
    "objectID": "OverviewD2.html#extended-concepts",
    "href": "OverviewD2.html#extended-concepts",
    "title": "Day 2",
    "section": "3 Extended concepts",
    "text": "3 Extended concepts\nThere are many further advanced survival concepts that are related or go beyond what we are able to cover in our short course. We encourage you to look at further resources or expand your knowledge these other concepts:\n\nFrailty survival models\nHierarchical and mixture models\nBayesian survival models\nMarkov models\nRelative survival\nCausal techniques in survival",
    "crumbs": [
      "Day 2: Flexible parametric & multi-state"
    ]
  },
  {
    "objectID": "PH_assump.html",
    "href": "PH_assump.html",
    "title": "1 PH assumption violated",
    "section": "",
    "text": "0.1 Lecture\nPut here\n\n\n0.2 Practical exercises\nPut here",
    "crumbs": [
      "Day 1: Joint & parametric modelling",
      "1 PH assumption violated"
    ]
  }
]